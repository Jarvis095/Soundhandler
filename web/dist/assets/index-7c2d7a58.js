var I=Object.defineProperty;var X=(i,e,t)=>e in i?I(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var u=(i,e,t)=>(X(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const T=(i=0,e=0,t=0)=>{const{yaw:o=0,pitch:n=0,roll:s=0}=typeof i=="object"?i:{yaw:i,pitch:e,roll:t},r={x:0,y:0,z:0},d={x:0,y:0,z:0},h=o*(Math.PI/180);r.x=Math.sin(h),r.z=Math.cos(h+Math.PI);const m=n*(Math.PI/180);r.y=Math.sin(m),d.y=Math.cos(m);const f=s*(Math.PI/180);return d.x=Math.sin(f),d.z=Math.sin(f),{forward:r,up:d}};class Z{constructor(){u(this,"currentTime");this.currentTime=Date.now()}getDelta(){const e=Date.now(),t=(e-this.currentTime)/1e3;return this.currentTime=e,t}}var L={exports:{}},v=typeof Reflect=="object"?Reflect:null,C=v&&typeof v.apply=="function"?v.apply:function(e,t,o){return Function.prototype.apply.call(e,t,o)},N;v&&typeof v.ownKeys=="function"?N=v.ownKeys:Object.getOwnPropertySymbols?N=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:N=function(e){return Object.getOwnPropertyNames(e)};function P(i){console&&console.warn&&console.warn(i)}var b=Number.isNaN||function(e){return e!==e};function a(){a.init.call(this)}L.exports=a;L.exports.once=U;a.EventEmitter=a;a.prototype._events=void 0;a.prototype._eventsCount=0;a.prototype._maxListeners=void 0;var S=10;function g(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return S},set:function(i){if(typeof i!="number"||i<0||b(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");S=i}});a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};a.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||b(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function O(i){return i._maxListeners===void 0?a.defaultMaxListeners:i._maxListeners}a.prototype.getMaxListeners=function(){return O(this)};a.prototype.emit=function(e){for(var t=[],o=1;o<arguments.length;o++)t.push(arguments[o]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var d=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw d.context=r,d}var h=s[e];if(h===void 0)return!1;if(typeof h=="function")C(h,this,t);else for(var m=h.length,f=D(h,m),o=0;o<m;++o)C(f[o],this,t);return!0};function E(i,e,t,o){var n,s,r;if(g(t),s=i._events,s===void 0?(s=i._events=Object.create(null),i._eventsCount=0):(s.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),s=i._events),r=s[e]),r===void 0)r=s[e]=t,++i._eventsCount;else if(typeof r=="function"?r=s[e]=o?[t,r]:[r,t]:o?r.unshift(t):r.push(t),n=O(i),n>0&&r.length>n&&!r.warned){r.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=i,d.type=e,d.count=r.length,P(d)}return i}a.prototype.addListener=function(e,t){return E(this,e,t,!1)};a.prototype.on=a.prototype.addListener;a.prototype.prependListener=function(e,t){return E(this,e,t,!0)};function B(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function A(i,e,t){var o={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},n=B.bind(o);return n.listener=t,o.wrapFn=n,n}a.prototype.once=function(e,t){return g(t),this.on(e,A(this,e,t)),this};a.prototype.prependOnceListener=function(e,t){return g(t),this.prependListener(e,A(this,e,t)),this};a.prototype.removeListener=function(e,t){var o,n,s,r,d;if(g(t),n=this._events,n===void 0)return this;if(o=n[e],o===void 0)return this;if(o===t||o.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,o.listener||t));else if(typeof o!="function"){for(s=-1,r=o.length-1;r>=0;r--)if(o[r]===t||o[r].listener===t){d=o[r].listener,s=r;break}if(s<0)return this;s===0?o.shift():G(o,s),o.length===1&&(n[e]=o[0]),n.removeListener!==void 0&&this.emit("removeListener",e,d||t)}return this};a.prototype.off=a.prototype.removeListener;a.prototype.removeAllListeners=function(e){var t,o,n;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[e]),this;if(arguments.length===0){var s=Object.keys(o),r;for(n=0;n<s.length;++n)r=s[n],r!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=o[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this};function V(i,e,t){var o=i._events;if(o===void 0)return[];var n=o[e];return n===void 0?[]:typeof n=="function"?t?[n.listener||n]:[n]:t?j(n):D(n,n.length)}a.prototype.listeners=function(e){return V(this,e,!0)};a.prototype.rawListeners=function(e){return V(this,e,!1)};a.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Y.call(i,e)};a.prototype.listenerCount=Y;function Y(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?N(this._events):[]};function D(i,e){for(var t=new Array(e),o=0;o<e;++o)t[o]=i[o];return t}function G(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function j(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function U(i,e){return new Promise(function(t,o){function n(r){i.removeListener(e,s),o(r)}function s(){typeof i.removeListener=="function"&&i.removeListener("error",n),t([].slice.call(arguments))}_(i,e,s,{once:!0}),e!=="error"&&z(i,n,{once:!0})})}function z(i,e,t){typeof i.on=="function"&&_(i,"error",e,t)}function _(i,e,t,o){if(typeof i.on=="function")o.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function n(s){o.once&&i.removeEventListener(e,n),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var $=L.exports;class M{constructor(e){u(this,"outputNode",null);u(this,"destination",null);u(this,"eventEmitter",new $.EventEmitter);u(this,"loadingFilters",{});u(this,"activeFilters",{});u(this,"outputFilterNode",null);u(this,"filterChain",[]);u(this,"sounityController");u(this,"audioCtx");this.sounityController=e,this.audioCtx=e.getAudioCtx()}on(e,t){this.eventEmitter.on(e,t)}emit(e,...t){return this.eventEmitter.emit(e,...t)}once(e,t){this.eventEmitter.once(e,t)}setOutputNode(e){var t;this.destination&&((t=this.outputNode)==null||t.disconnect(this.destination),e.connect(this.destination)),this.outputNode=e}connect(e){var t,o,n,s;if(!e)throw new Error("Destination node is required");this.destination&&(this.hasActiveFilters()?(t=this.outputFilterNode)==null||t.disconnect(this.destination):(o=this.outputNode)==null||o.disconnect(this.destination)),this.hasActiveFilters()?(n=this.outputFilterNode)==null||n.connect(e):(s=this.outputNode)==null||s.connect(e),this.destination=e}disconnect(){var e,t;this.hasActiveFilters()?(e=this.outputFilterNode)==null||e.disconnect():(t=this.outputNode)==null||t.disconnect(),this.destination=null}async addFilter(e){if(e in this.activeFilters)throw new Error(`There is already an active filter with given identifier '${e}'`);await(this.loadingFilters[e]=this.addFilterAsync(e)),delete this.loadingFilters[e]}async addFilterAsync(e){const t=this.sounityController.getFilterOptions(e);let o;if(t.type==="biquad"){const n=t.options;o=new BiquadFilterNode(this.audioCtx,n)}else if(t.type==="convolver"){const n=t.options,r=await(await fetch(n.url)).arrayBuffer(),d=await this.audioCtx.decodeAudioData(r);o=new ConvolverNode(this.audioCtx,{buffer:d,disableNormalization:n.disableNormalization})}else throw new Error(`Invalid filter type '${t.type}'`);this.activeFilters[e]=o,this.connectFilter(e)}connectFilter(e){var o,n;const t=this.activeFilters[e];if(this.filterChain.length){const s=this.activeFilters[this.filterChain[this.filterChain.length-1]];this.destination?(s.disconnect(this.destination),s.connect(t),t.connect(this.destination),this.outputFilterNode=t):(s.connect(t),this.outputFilterNode=t)}else this.destination&&((o=this.outputNode)==null||o.disconnect(this.destination)),(n=this.outputNode)==null||n.connect(t),this.outputFilterNode=t,this.destination&&t.connect(this.destination);this.filterChain.push(e)}hasActiveFilters(){return this.filterChain.length>0}async removeFilter(e){var r,d,h,m;this.loadingFilters[e]&&await this.loadingFilters[e];const t=this.activeFilters[e];if(!t)throw new Error(`Invalid filter name '${e}'.`);const o=this.filterChain.indexOf(e),n=o===this.filterChain.length-1,s=o===0;if(!s&&!n){const f=this.activeFilters[this.filterChain[o-1]],F=this.activeFilters[this.filterChain[o+1]];f.disconnect(t),t.disconnect(F),f.connect(F)}else if(s&&!n){const f=this.activeFilters[this.filterChain[o+1]];(r=this.outputNode)==null||r.disconnect(t),(d=this.outputNode)==null||d.connect(f),t.disconnect(f)}else if(!s&&n){const f=this.activeFilters[this.filterChain[o-1]];f.disconnect(t),this.destination&&t.disconnect(this.destination),this.destination&&f.connect(this.destination)}else s&&n&&(this.destination&&t.disconnect(this.destination),(h=this.outputNode)==null||h.disconnect(t),this.destination&&((m=this.outputNode)==null||m.connect(this.destination)));this.filterChain.splice(o,1),delete this.activeFilters[e]}}class k extends M{constructor(t){super(t);u(this,"masterVolumeGainNode");this.masterVolumeGainNode=this.audioCtx.createGain(),this.setOutputNode(this.masterVolumeGainNode)}getInputNode(){return this.masterVolumeGainNode}tick(t){}}const w={};fetch("https://summit_soundhandler/sounity:get-defaults").then(i=>i.text()).then(i=>JSON.parse(JSON.parse(i))).then(i=>Object.keys(i).forEach(e=>w[e]=i[e]));function c(i,e,t){return e!==void 0?e:i in w?w[i]:t}const y=class y{constructor(){u(this,"cache",{})}static getInstance(){return this.instance===null&&(this.instance=new y),this.instance}loadUrl(e){return new Promise(async(t,o)=>{if(e in this.cache)return t(await this.cache[e].arrayBuffer());fetch(e).then(async n=>{const s=await n.blob();return this.cache[e]=s,await s.arrayBuffer()}).then(n=>{t(n)}).catch(o)})}};u(y,"instance",null);let x=y;var p;(function(i){i[i.SETUP=0]="SETUP",i[i.READY=1]="READY",i[i.PLAYING=2]="PLAYING",i[i.FINISHED=3]="FINISHED",i[i.ERROR=4]="ERROR"})(p||(p={}));class K extends M{constructor(t,o,n,s){super(s);u(this,"state",p.SETUP);u(this,"options");u(this,"identifier");u(this,"url");u(this,"outputType");u(this,"duration");u(this,"volume");u(this,"loop");u(this,"posX",0);u(this,"posY",0);u(this,"posZ",0);u(this,"rotX",0);u(this,"rotY",0);u(this,"rotZ",0);u(this,"audioBuffer",null);u(this,"audioBufferSourceNode",null);u(this,"volumeGainNode",null);u(this,"pannerNode",null);this.identifier=t,this.url=o,this.options=n,this.loop=c("loop",n.loop,!1),this.outputType=c("outputType",n.outputType,"sfx"),this.volume=c("volume",n.volume,1),this.move(c("posX",n.posX,0),c("posY",n.posY,0),c("posZ",n.posZ,0)),this.rotate(c("rotX",n.rotX,0),c("rotY",n.rotY,0),c("rotZ",n.rotZ,0)),this.setup()}async setup(){try{this.audioBuffer=await this.audioCtx.decodeAudioData(await x.getInstance().loadUrl(this.url)),this.audioBufferSourceNode=this.audioCtx.createBufferSource(),this.audioBufferSourceNode.loop=this.loop,this.audioBufferSourceNode.buffer=this.audioBuffer,this.duration=this.audioBuffer.duration,this.audioBufferSourceNode.onended=()=>{this.loop||(fetch("https://summit_soundhandler/soundEnded",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:this.identifier})}).catch(t=>{console.error("Failed to notify server:",t)}),this.setState(p.FINISHED))},this.volumeGainNode=this.audioCtx.createGain(),this.volumeGainNode.gain.value=this.getVolume(),this.pannerNode=this.audioCtx.createPanner(),this.pannerNode.panningModel=c("panningModel",this.options.panningModel,"HRTF"),this.pannerNode.distanceModel=c("distanceModel",this.options.distanceModel,"inverse"),this.pannerNode.maxDistance=c("maxDistance",this.options.maxDistance,500),this.pannerNode.refDistance=c("refDistance",this.options.refDistance,3),this.pannerNode.rolloffFactor=c("rolloffFactor",this.options.rolloffFactor,1),this.pannerNode.coneInnerAngle=c("coneInnerAngle",this.options.coneInnerAngle,360),this.pannerNode.coneOuterAngle=c("coneOuterAngle",this.options.coneOuterAngle,0),this.pannerNode.coneOuterGain=c("coneOuterGain",this.options.coneOuterGain,0),this.pannerNode.positionX.value=this.posX,this.pannerNode.positionY.value=this.posY,this.pannerNode.positionZ.value=this.posZ,this.pannerNode.orientationX.value=this.rotX,this.pannerNode.orientationY.value=this.rotY,this.pannerNode.orientationZ.value=this.rotZ,this.audioBufferSourceNode.connect(this.volumeGainNode),this.volumeGainNode.connect(this.pannerNode),this.setOutputNode(this.pannerNode),this.setState(p.READY)}catch(t){console.error(t),this.setState(p.ERROR)}}setState(t){this.state=t,t===p.READY&&this.emit("ready"),this.emit("statechange")}getState(){return this.state}start(t,o,n,s){var d;if(this.state===p.ERROR)return;if(this.state===p.SETUP)return this.once("ready",()=>this.start(t,o,n,s));let r=0;if(t!==void 0&&this.duration!==1/0){const h=t/1e3;if(this.duration!==void 0&&h>=this.duration&&this.loop)r=h%this.duration;else if(this.duration!==void 0&&h<this.duration)r=h;else return}(d=this.audioBufferSourceNode)==null||d.start(0,r),this.setVolume(n??this.volume),this.setLoop(s??this.loop),this.setRefDistance(o??this.pannerNode.refDistance)}move(t,o,n){this.posX=t,this.posY=n,this.posZ=o}rotate(t,o,n){const{forward:s}=T(n*-1,t,o);this.rotX=s.x,this.rotY=s.y,this.rotZ=s.z}stop(){var t;if(this.state!==p.ERROR){if(this.state===p.SETUP)return this.once("ready",()=>this.stop());(t=this.audioBufferSourceNode)==null||t.stop(0)}}dispose(){this.disconnect()}getVolume(){return this.outputType==="music"?this.volume*this.sounityController.getMusicVolume():this.outputType==="sfx"?this.volume*this.sounityController.getSfxVolume():this.volume}setVolume(t){if(t<0||t>1)throw new Error("Volume must be between 0 and 1.");this.volume=t,this.volumeGainNode.gain.value=this.getVolume()}setMaxDistance(t){if(t<0)throw new Error("maxDistance must be a positive number.");this.pannerNode.maxDistance=t}setRefDistance(t){if(t<0)throw new Error("refDistance must be a positive number.");this.pannerNode.refDistance=t}setLoop(t){this.loop=t,this.audioBufferSourceNode.loop=t}tick(t){var o,n,s,r,d,h,m;(o=this.pannerNode)==null||o.positionX.linearRampToValueAtTime(this.posX,t),(n=this.pannerNode)==null||n.positionY.linearRampToValueAtTime(this.posY,t),(s=this.pannerNode)==null||s.positionZ.linearRampToValueAtTime(this.posZ,t),(r=this.pannerNode)==null||r.orientationX.linearRampToValueAtTime(this.rotX,t),(d=this.pannerNode)==null||d.orientationY.linearRampToValueAtTime(this.rotY,t),(h=this.pannerNode)==null||h.orientationZ.linearRampToValueAtTime(this.rotZ,t),(m=this.volumeGainNode)==null||m.gain.linearRampToValueAtTime(this.getVolume(),t)}}class H{constructor(){u(this,"soundNodes",{});u(this,"availableFilters",{});u(this,"audioCtx");u(this,"clock",new Z);u(this,"posX",0);u(this,"posY",0);u(this,"posZ",0);u(this,"forwardX",1);u(this,"forwardY",0);u(this,"forwardZ",0);u(this,"upX",0);u(this,"upY",1);u(this,"upZ",0);u(this,"masterVolume",1);u(this,"sfxVolume",1);u(this,"musicVolume",1);u(this,"tickId");u(this,"outputNode");this.audioCtx=new AudioContext,this.outputNode=new k(this),this.outputNode.connect(this.audioCtx.destination),this.tickId=setInterval(()=>{this.tick()},16)}moveListener(e,t,o){this.posX=e,this.posY=o,this.posZ=t}rotateListener(e,t,o){const{forward:n,up:s}=T(o,e,t);this.forwardX=n.x,this.forwardY=n.y*-1,this.forwardZ=n.z,this.upX=s.x,this.upY=s.y,this.upZ=s.z}setVolume(e,t){this.sfxVolume=e,this.musicVolume=t}getAudioCtx(){return this.audioCtx}getSoundNode(e){if(e in this.soundNodes)return this.soundNodes[e];throw new Error(`Sound with identifier '${e}' does not exist.`)}createSound(e,t,o){if(e in this.soundNodes)throw new Error(`Sound with identifier '${e}' already exists.`);const n=new K(e,t,o,this);n.connect(this.outputNode.getInputNode()),this.soundNodes[e]=n}startSound(e,t,o,n,s){this.getSoundNode(e).start(t,o,n,s)}stopSound(e){this.getSoundNode(e).stop()}moveSound(e,t,o,n){this.getSoundNode(e).move(t,o,n)}rotateSound(e,t,o,n){this.getSoundNode(e).rotate(t,o,n)}disposeSound(e){this.getSoundNode(e).dispose(),delete this.soundNodes[e]}tick(){const e=this.audioCtx.currentTime+this.clock.getDelta();this.audioCtx.listener.positionX.linearRampToValueAtTime(this.posX,e),this.audioCtx.listener.positionY.linearRampToValueAtTime(this.posY,e),this.audioCtx.listener.positionZ.linearRampToValueAtTime(this.posZ,e),this.audioCtx.listener.forwardX.linearRampToValueAtTime(this.forwardX,e),this.audioCtx.listener.forwardY.linearRampToValueAtTime(this.forwardY,e),this.audioCtx.listener.forwardZ.linearRampToValueAtTime(this.forwardZ,e),this.audioCtx.listener.upX.linearRampToValueAtTime(this.upX,e),this.audioCtx.listener.upY.linearRampToValueAtTime(this.upY,e),this.audioCtx.listener.upZ.linearRampToValueAtTime(this.upZ,e);for(const t of Object.values(this.soundNodes))t.getState()!==p.SETUP&&t.tick(e);this.outputNode.tick(e)}setSoundVolume(e,t){this.getSoundNode(e).setVolume(t)}setSoundMaxDistance(e,t){this.getSoundNode(e).setMaxDistance(t)}setLoop(e,t){this.getSoundNode(e).setLoop(t)}setSoundRefDistance(e,t){this.getSoundNode(e).setRefDistance(t)}createFilter(e,t,o){if(e in this.availableFilters)throw new Error(`Filter with identifier '${e}' already exists.`);this.availableFilters[e]={type:t,options:o}}getFilterOptions(e){if(e in this.availableFilters)return this.availableFilters[e];throw new Error(`Filter with identifier '${e}' does not exist.`)}addSoundFilter(e,t){this.getSoundNode(e).addFilter(t)}removeSoundFilter(e,t){this.getSoundNode(e).removeFilter(t)}addListenerFilter(e){this.outputNode.addFilter(e)}removeListenerFilter(e){this.outputNode.removeFilter(e)}getMusicVolume(){return this.musicVolume/10}getSfxVolume(){return this.sfxVolume/10}}const l=new H;window.sounityController=l;const R={update(i){l.moveListener(i.posX,i.posY,i.posZ),l.rotateListener(i.rotX,i.rotY,i.rotZ),l.setVolume(i.sfxVolume,i.musicVolume)},moveSound(i){l.moveSound(i.identifier,i.posX,i.posY,i.posZ)},rotateSound(i){l.rotateSound(i.identifier,i.rotX,i.rotY,i.rotZ)},createSound(i){l.createSound(i.identifier,i.source,i.options)},startSound(i){l.startSound(i.identifier,i.startTime,i.refDistance,i.volume,i.loop)},stopSound(i){l.stopSound(i.identifier)},disposeSound(i){l.disposeSound(i.identifier)},addSoundFilter(i){l.addSoundFilter(i.identifier,i.filterName)},removeSoundFilter(i){l.removeSoundFilter(i.identifier,i.filterName)},addListenerFilter(i){l.addListenerFilter(i.filterName)},removeListenerFilter(i){l.removeListenerFilter(i.filterName)},createFilter(i){l.createFilter(i.filterName,i.filterType,i.options)},setSoundVolume(i){l.setSoundVolume(i.identifier,i.volume)},setSoundMaxDistance(i){l.setSoundMaxDistance(i.identifier,i.maxDistance)},setSoundRefDistance(i){l.setSoundRefDistance(i.identifier,i.refDistance)},setLoop(i){l.setLoop(i.identifier,i.loop)}};window.addEventListener("message",i=>{if(i.data.type in R)try{R[i.data.type](i.data)}catch(e){console.error("Error handling message:",e)}});fetch("https://summit_soundhandler/sounity:ready").catch(i=>{console.error("Failed to notify server:",i)});
